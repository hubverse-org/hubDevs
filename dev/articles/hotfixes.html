<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Releasing Hotfixes • hubDevs</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="hotfixes_files/libs/quarto-html/popper.min.js"></script><script src="hotfixes_files/libs/quarto-html/tippy.umd.min.js"></script><link href="hotfixes_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="hotfixes_files/libs/quarto-html/light-border.css" rel="stylesheet">
<script src="hotfixes_files/libs/quarto-diagram/mermaid.min.js"></script><script src="hotfixes_files/libs/quarto-diagram/mermaid-init.js"></script><link href="hotfixes_files/libs/quarto-diagram/mermaid.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Releasing Hotfixes">
<meta property="og:image" content="https://hubverse-org.github.io/hubDevs/logo.png">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://hubdocs.readthedocs.io/en/latest/" class="external-link"><img src="https://raw.githubusercontent.com/hubverse-org/hubStyle/main/inst/hubverse.png" id="logo" height="30" alt="hubverse"></a>
    <a class="navbar-brand me-2" href="../index.html">hubDevs</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/release-process.html">Introduction to the release process</a></li>
    <li><a class="dropdown-item" href="../articles/hotfixes.html">Releasing Hotfixes</a></li>
    <li><a class="dropdown-item" href="../articles/release-checklists.html">Release Checklists</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/hubverse-org/hubDevs/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Releasing Hotfixes</h1>




      <small class="dont-index">Source: <a href="https://github.com/hubverse-org/hubDevs/blob/main/vignettes/hotfixes.qmd" class="external-link"><code>vignettes/hotfixes.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <p>This document is adapted for The Hubverse from <a href="https://carpentries.github.io/workbench-dev/hotfixes.html" class="external-link">The Carpentries Developer’s Handbook</a> (c) The Carpentries under the <a href="https://creativecommons.org/licenses/by/4.0/" class="external-link">CC-BY 4.0 license</a>.</p>
<p>A hotfix is a bug fix for a situation where a bug has been found, but the main branch has new features that are not yet ready to be released. This chapter will be a walkthrough of a scenario with a diagram of the status of the Git repository during each iteration based on the real life process used in <a href="https://github.com/carpentries/sandpaper/pull/539" class="external-link">carpentries/sandpaper#539</a> to resolve a bug in link processing.</p>
<p>A process for creating a hotfix release is similar to that of the standard release with the following differences:</p>
<table class="table caption-top">
<thead><tr class="header">
<th></th>
<th>standard</th>
<th>hotfix</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>parent branch</td>
<td><code>main</code></td>
<td><code>&lt;tag&gt;</code></td>
</tr>
<tr class="even">
<td>tag and release</td>
<td>after merge</td>
<td>
<em>before</em> merge</td>
</tr>
<tr class="odd">
<td>merge conflicts</td>
<td>never</td>
<td>with <code>DESCRIPTION</code> and <code>NEWS.md</code>
</td>
</tr>
</tbody>
</table>
<p>Take for example a situation where you want to introduce two new features into the project, so you create two branches for each of them. You finish the first and merge it into the main branch and you are still working on the second. Your Git graph might look something like this:</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p>
<figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">gitGraph
    commit id: "abcd"
    commit id: "efgh" tag: "0.14.0"
    branch feature1
    branch feature2
    checkout main
    checkout feature1
    commit id: "ijkl"
    commit id: "mnop"
    checkout main
    merge feature1 id: "gpne"
    checkout feature2
    commit id: "qrst"
    commit id: "uvwx"
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<section class="level2"><h2 id="step-1-create-a-fix-and-pull-request">Step 1: Create a Fix and Pull Request<a class="anchor" aria-label="anchor" href="#step-1-create-a-fix-and-pull-request"></a>
</h2>
<p>Then, you get a report (let’s call it issue number 143) that something is broken and you need to fix it immediately. Normally, to fix bugs, you would check out a new bugfix branch from the <code>main</code> branch. Here’s the catch: if you check out from the main branch you will grab <code>feature1</code> as well, which is not yet ready for production because you intended <code>feature2</code> to be released along side. In this case, you need to create a hotfix, and create the branch <em>from the last tag</em> (which in this case is 0.14.0).</p>
<p><strong>IMPORTANT</strong>: When you create a hotfix, name the branch <code>&lt;author&gt;/hotfix/&lt;issue&gt;</code>. By using <code>/hotfix/</code> in the branch name, the GitHub workflows will know to test this package against the released versions from the R-universe.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">main</span><span class="kw">)</span><span class="ex">$</span> git describe</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| 0.14.0-3-ggpne</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">main</span><span class="kw">)</span><span class="ex">$</span> git switch <span class="at">--detach</span> 0.14.0 <span class="co"># checkout the tag</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#| HEAD is now at efgh Merge pull request #140 from hubverse-org/release-0.14.0</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="kw">((</span><span class="dv">0</span>.<span class="dv">14</span>.<span class="dv">0</span><span class="kw">))</span><span class="ex">$</span> git switch <span class="at">-c</span> znk/hotfix/143 <span class="co"># create a new branch</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">#| switched to new branch 'znk/hotfix/143'</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">znk/hotfix/143</span><span class="kw">)</span><span class="ex">$</span></span></code></pre></div>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p>
<figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">gitGraph
    commit id: "abcd"
    commit id: "efgh" tag: "0.14.0"
    branch feature1
    branch feature2
    branch znk/hotfix/143
    checkout main
    checkout feature1
    commit id: "ijkl"
    commit id: "mnop"
    checkout main
    merge feature1 id: "gpne"
    checkout feature2
    commit id: "qrst"
    commit id: "uvwx"
    checkout znk/hotfix/143
    commit id: "yzAB"
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>Once you have made your hotfix (with a test of course, because we always make sure to verify our fixes), then you should push it up and open a pull request:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">znk/hotfix/143</span><span class="kw">)</span><span class="ex">$</span> git push <span class="at">-u</span> origin znk/hotfix/143</span></code></pre></div>
</section><section class="level2"><h2 id="step-2-ensure-checks-pass-and-create-tag">Step 2: Ensure Checks pass and create tag<a class="anchor" aria-label="anchor" href="#step-2-ensure-checks-pass-and-create-tag"></a>
</h2>
<p>You should check that the hotfix does not break any existing tests, which are automatically run from the pull request. Once you have confirmed that everything works as expected, the next step is to bump the version and add a tag. This tag will allow you to release the patch version.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">znk/hotfix/143</span><span class="kw">)</span><span class="ex">$</span> git add DESCRIPTION NEWS.md</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">znk/hotfix/143</span><span class="kw">)</span><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">'bump version to 0.14.1'</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">znk/hotfix/143</span><span class="kw">)</span><span class="ex">$</span> git tag <span class="at">-s</span> 0.14.1 <span class="at">-m</span> <span class="st">'flipped retroencabulator switch option'</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">znk/hotfix/143</span><span class="kw">)</span><span class="ex">$</span> git push</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">znk/hotfix/143</span><span class="kw">)</span><span class="ex">$</span> git push <span class="at">--tags</span></span></code></pre></div>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p>
<figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">gitGraph
    commit id: "abcd"
    commit id: "efgh" tag: "0.14.0"
    branch feature1
    branch feature2
    branch znk/hotfix/143
    checkout main
    checkout feature1
    commit id: "ijkl"
    commit id: "mnop"
    checkout main
    merge feature1 id: "gpne"
    checkout feature2
    commit id: "qrst"
    commit id: "uvwx"
    checkout znk/hotfix/143
    commit id: "yzAB"
    commit id: "CDEF" tag: "0.14.1"
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>**Note the 0.14.1 tag is on the <code>znk/hotfix/143</code> branch at the bottom.</p>
<p>At this point, the checks will not run on the pull request because there will be a conflict in the DESCRIPTION and NEWS.md files. This is okay. All you did was update the version numbers and add NEWS. <strong>Do not merge at this point</strong>. The next step is to release the patch.</p>
</section><section class="level2"><h2 id="step-3-release-the-patch">Step 3: Release the Patch<a class="anchor" aria-label="anchor" href="#step-3-release-the-patch"></a>
</h2>
<p>You will release the patch using the same method as described in <a href="releases">the releases chapter</a>. You can either release on GitHub directly or via the GitHub CLI. Importantly, when you create the release, you should <em>create the release from the new tag</em>. This can be done via the GitHub interface or using GitHub’s CLI tool.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">(</span><span class="ex">znk/hotfix/143</span><span class="kw">)</span><span class="ex">$</span> gh release create 0.14.1</span></code></pre></div>
</section><section class="level2"><h2 id="step-4-resolve-conflicts-and-merge">Step 4: Resolve Conflicts and Merge<a class="anchor" aria-label="anchor" href="#step-4-resolve-conflicts-and-merge"></a>
</h2>
<p>Now that you’ve created the release, you should resolve the conflicts in the DESCRIPTION and NEWS files and then merge it back into <code>main</code> (note: this will create two merge commits, but I’m only showing one in the diagram to make it cleaner):</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p>
<figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">gitGraph
    commit id: "abcd"
    commit id: "efgh" tag: "0.14.0"
    branch feature1
    branch feature2
    branch znk/hotfix/143
    checkout main
    checkout feature1
    commit id: "ijkl"
    commit id: "mnop"
    checkout main
    merge feature1 id: "gpne"
    checkout feature2
    commit id: "qrst"
    commit id: "uvwx"
    checkout znk/hotfix/143
    commit id: "yzAB"
    commit id: "CDEF" tag: "0.14.1"
    checkout main
    merge znk/hotfix/143 id: "DeFn"
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>Now you will have the patch in place for the released version <em>and</em> the devel version of this hubverse package, which means that you can continue to develop as normal and merge the next feature when you are ready:</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p>
<figure class=""><p></p>
<div>
<pre class="mermaid mermaid-js">gitGraph
    commit id: "abcd"
    commit id: "efgh" tag: "0.14.0"
    branch feature1
    branch feature2
    branch znk/hotfix/143
    checkout main
    checkout feature1
    commit id: "ijkl"
    commit id: "mnop"
    checkout main
    merge feature1 id: "gpne"
    checkout feature2
    commit id: "qrst"
    commit id: "uvwx"
    checkout znk/hotfix/143
    commit id: "yzAB"
    commit id: "CDEF" tag: "0.14.1"
    checkout main
    merge znk/hotfix/143 id: "DeFn"
    checkout feature2
    commit id: "GHIJ"
    commit id: "KLMN"
    checkout main
    merge feature2 id: "FnNL"
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'light-border',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config);
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Anna Krystalli, Zhian N. Kamvar.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1. PR Previews built by <a href="https://www.netlify.com" class="external-link">Netlify</a>. Provided without <strong>any warranty</strong>.</p>
</div>

    </footer>
</div>





  </body>
</html>
